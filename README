---
CODE LAYOUT:
---

  doorcontrol/
    - modules for controlling the door
  doorsensor/
    - modules for detecting if the door is open
  presence/
    - modules for detecting if someone is home
  services/
    - twisted modules for services
  state/
    - state machine logic
  xmpp/
    - xmpp communication


---
PREREQS:
---

  sudo apt-get install build-essential python-dev
  sudo apt-get install python-virtualenv
  cd gdoormon
  virtualenv --system-site-packages deps
  source deps/bin/activate
  pip install -r requirements.txt


  # Comes from pip/requirements.txt:
  #sudo apt-get install wokkel        # also installs twisted
  #sudo apt-get install python-mox    # for tests

  # Added as git submodule, not needed:
  #wget https://github.com/oxplot/fysom/blob/master/fysom.py


---
TESTING
---
twistd -ny testing/presence_regtest.py 


---
TODO:
---
  - "timeout canceled" message always sent
  - fix snooze? give help.
  - timeout approaching warning
  - subscribe to:
    - when registered clients connect/disconnect
    - when nobody/somebody is home
    - when the door changes state
  - add a "manual-only" mode that requires a human
  - better dep management (no apt)
    - pip install virtualenv virtualenvwrapper
    - fysom as git submodule - or from pip
  - reformat this file using markdown
  - pylint script
  - broadcast who comes home and last person who left; register name when
    registering. default to "user1", "user2", etc.
  - support dd-wrt/airport interchangeably 
  - support irc
